### 简介

本系列主要讲解了开发一个编程语言解析器和编译器的理论和实践。
跟着本教程学习在学习结束后你会学习到编译器结构、设计一个新的
编程语言和如何写一个可以使用的编译器方方面面的知识。

尽管我不是一个计算机科班出身（我是物理学博士），但是我很早
就对编译器有兴趣了。我几乎把市面上有关编译器的书都看了，这
个过程真是痛苦，因为编译原理的书都是写给计算机专业的人看的，
对不是计算机专业的人来说有点难懂。但是我通过日积月累的学习，
总算是有所收获。我想把我所学习到的知识分享给大家。不要指望
学完本教程就成了计算机专家，本教程不过多讲理论，主要注重实践。


学习本教程最好边学边做。每学完一个教程最好自己独立去实践一下。
我用的是Turbo Pascal（现在我会用C来写）。本教程会穿插的给出
一些可以被直接运行的例子。

有些文章会给出一些最终代码，但是你压根不知道这些代码是怎么写出来的。
我希望能避免这样的情况，我希望学完本教程后能知道这些代码是怎么被
写出来的。知道实现思路，而不是死记硬背。

本教程每个章节都会覆盖编译原理的某一方面，尽量让每个章节相对独立，
如果以后你对哪个方面有兴趣，你可以只看那一章。

一般一个编译原理的书都会按照下面的顺序讲解，但是本教程可能会舍弃一些
方面的内容。
1. 什么是编译器
2. BNF
3. 非确定/确定有限状态自动机的词法扫描器
4. 自顶向下的递归语法解析器，LALR语法解析器
5. 中间语言的内容，重点阐述P-CODE、逆波兰表达式。
6. 子程序和参数传递，类型声明等内容
7. 代码生成，基本没有多少人学到这里
8. 优化器，基本没有人看

本教程将采取另外一种方式来讲解，本教程不会讲解太多细枝末节的东西，也不会
讲那些理论，只会给出一个能用的最简单的例子。但是不代表理论不重要，如果你
想进一步深入学习编译器的话，理论非常重要。

语法解析器方面我只会讲解自顶向下的递归解析器。

本教程参考了Small C的一些内容。

直接进入正题。
因为每个程序都需要一些辅助的代码，比如说I/O相关，错误处理相关。我们的程序也
不例外，首先我们先定义一些常用的辅助代码，这些代码会在后续的教程中一直被使用。


首先，肯定要有一个从IO读取字符的函数，我们定义为：
``` c
void GetChar()
```

每调用一次就会从标准输入中读取一个字符。为了方便使用结果，我们定义一个全局变量用来保存每次读取的字符。

``` c
char Look;
```

这样的话，`GetChar`函数的实现如下：
``` c
void GetChar() 
{
    Look = getchar();
}
```

如果发生错误的话，比如说输入的字符串不合法，此时一般会打印错误信息。
``` c
void Error(char *s)
{
    printf("\nError: %s\n", s);
}
```

如果是严重错误需要推出的话，此时需要一个`Abort`函数。
```c
void Abort(char *s)
{
    Error(s);
    exit(1);
}
```

最终的文件如下：
cradle.h
``` c
#ifndef _CRADLE_H
#define _CRADLE_H

char Look;

void GetChar();

void Error(char *s);
void Abort(char *s);

#endif

```

cradle.c
``` c
#include "cradle.h"
#include <stdio.h>
#include <stdlib.h>


void GetChar() 
{
    Look = getchar();
}


void Error(char *s)
{
    printf("\nError: %s.", s);
}

void Abort(char *s)
{
    Error(s);
    exit(1);
}
```

下一章会在使用过程逐步添加一些有用的辅助函数。设计是一步一步来的。
